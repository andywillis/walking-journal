{"version":3,"file":"index-85a24945.js","sources":["../../src/signals/index.js","../../src/components/DarkLightIcon/index.jsx","../../src/components/Details/DetailsPanel/index.jsx","../../src/components/Details/PanelItem/index.jsx","../../src/components/Details/PanelPara/index.jsx","../../src/components/Details/index.jsx","../../src/helpers/createMarkers.js","../../src/effects/updateMap.js","../../src/components/Map/index.jsx","../../src/components/Main/index.jsx","../../src/hooks/useTheme.js","../../src/layout/index.jsx","../../src/main.jsx"],"sourcesContent":["import { signal, computed } from '@preact/signals';\n\nimport data from '../data/walkdata.json';\n\n// Signals\n\nexport const darkMode = signal(false);\n\nexport const store = signal(data);\n\nexport const walks = computed(() => {\n\treturn store.value.walks;\n});\n\nexport const selectedWalk = signal(store.value.walks[0].shortname);\n\nexport const totalDistance = computed(() => {\n\tconst { totalDistance, unit } = store.value;\n\treturn { distance: totalDistance, unit };\n});\n\nexport const totalWalks = computed(() => {\n\treturn walks.value.length;\n});\n\nexport const totalJourneys = computed(() => {\n\treturn walks.value.reduce((acc, walk) => {\n\t\tacc += walk.dates.length;\n\t\treturn acc;\n\t}, 0);\n});\n\nexport const visibleGroup = signal(undefined);\n","import classNames from 'classnames';\n\nimport { darkMode } from '../../signals';\n\nimport style from './index.module.css';\n\nfunction handleDarkLightMode() {\n\tdarkMode.value = !darkMode.peek();\n}\n\n/**\n * DarkLightIcon\n *\n * @param {Object} { mode, label, handleClick, disabled }\n * @return {React.ReactElement}\n */\nfunction DarkLightIcon() {\n\n\tconst cn = classNames([ style.icon, style[darkMode.value ? 'dark' : 'light'] ]);\n\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\taria-label=\"Switch light/dark mode\"\n\t\t\tclass={cn}\n\t\t\tonClick={handleDarkLightMode}\n\t\t/>\n\t);\n\n}\n\nexport default DarkLightIcon;\n","import style from './style.module.css';\n\n/**\n * DetailsPanel\n *\n * @return {React.ReactElement}\n */\nfunction DetailsPanel({ children }) {\n\treturn (\n\t\t<section class={style.panel}>\n\t\t\t{children}\n\t\t</section>\n\t);\n}\n\nexport default DetailsPanel;\n","import { Link } from 'preact-router/match';\n\nimport style from './style.module.css';\n\n/**\n * PanelItem\n *\n * @param {object} props\n * @return {React.ReactElement}\n */\nfunction PanelItem(props) {\n\n\tconst {\n\t\tshortname,\n\t\tchildren\n\t} = props;\n\n\treturn (\n\t\t<Link\n\t\t\tclass={style.item}\n\t\t\tactiveClassName={style.active}\n\t\t\thref={`/${shortname}`}\n\t\t>{children}\n\t\t</Link>\n\t);\n\n}\n\nexport default PanelItem;\n","import style from './style.module.css';\n\n/**\n * PanelPara\n *\n * @param {object} props\n * @return {React.ReactElement}\n */\nfunction PanelPara({ children }) {\n\treturn (\n\t\t<p class={style.para}>\n\t\t\t{children}\n\t\t</p>\n\t);\n}\n\nexport default PanelPara;\n","import DarkLightIcon from '../DarkLightIcon';\nimport DetailsPanel from './DetailsPanel';\nimport PanelItem from './PanelItem';\nimport PanelPara from './PanelPara';\n\nimport {\n\twalks,\n\ttotalWalks,\n\ttotalDistance,\n\ttotalJourneys\n} from '../../signals';\n\nimport style from './style.module.css';\n\n/**\n * Details\n *\n * @return {React.ReactElement}\n */\nfunction Details() {\n\t\n\treturn (\n\t\t<section class={style.details}>\n\t\t\t<DetailsPanel title=\"Walk Journal\">\n\t\t\t\t<header class={style.detailsHeader}>\n\t\t\t\t\t<h4>Walking Journal</h4>\n\t\t\t\t\t<DarkLightIcon />\n\t\t\t\t</header>\n\t\t\t\t<PanelPara>\n\t\t\t\t\t<span>Total walks</span>\n\t\t\t\t\t<span>{totalWalks.value}</span>\n\t\t\t\t</PanelPara>\n\t\t\t\t<PanelPara>\n\t\t\t\t\t<span>Total journeys</span>\n\t\t\t\t\t<span>{totalJourneys.value}</span>\n\t\t\t\t</PanelPara>\n\t\t\t\t<PanelPara>\n\t\t\t\t\t<span>Total distance</span>\n\t\t\t\t\t<span>{totalDistance.value.distance}{totalDistance.value.unit}</span>\n\t\t\t\t</PanelPara>\n\t\t\t</DetailsPanel>\n\n\t\t\t<DetailsPanel title=\"List of walks\">\n\t\t\t\t<header class={style.detailsHeader}>\n\t\t\t\t\t<h4>List of walks</h4>\n\t\t\t\t</header>\n\t\t\t\t{walks.value.map(walk => {\n\n\t\t\t\t\tconst { id, shortname, name, distance, unit } = walk;\n\t\t\t\t\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<PanelItem key={id} id={id} shortname={shortname}>\n\t\t\t\t\t\t\t<span>{name}</span>\n\t\t\t\t\t\t\t<span>{distance}{unit}</span>\n\t\t\t\t\t\t</PanelItem>\n\t\t\t\t\t);\n\n\t\t\t\t})}\n\t\t\t</DetailsPanel>\n\n\t\t</section>\n\t);\n}\n\nexport default Details;\n","import * as L from 'leaflet';\n\n/**\n * createMarkers\n *\n * @param {array} data\n * @param {boolean} darkMode\n * @return {array}\n */\nfunction createMarkers(data, darkMode) {\n\n\treturn data.map(marker => {\n\n\t\tconst {\n\t\t\tgeometry: { coordinates },\n\t\t\tproperties: { icons }\n\t\t} = marker;\n\t\n\t\tconst [ lng, lat ] = coordinates;\n\t\n\t\treturn L.marker([ lat, lng ], {\n\t\t\ticon: L.divIcon({\n\t\t\t\thtml: icons[darkMode ? 'dark' : 'light'],\n\t\t\t\tclassName: ''\n\t\t\t})\n\t\t});\n\t\n\t});\n\n}\n\nexport default createMarkers;\n","import * as L from 'leaflet';\n\nimport { visibleGroup } from '../signals';\n\nimport { createMarkers } from '../helpers';\n\n/**\n * updateMap\n *\n * Accepts a set of geodata, the selected walk value,\n * the dark mode value, and the map reference, and uses that\n * information to add routes and markers to the map\n *\n * @param {object} geoData\n * @param {string} selectedWalk\n * @param {boolean} darkMode\n * @param {object} mapRef\n */\nfunction updateMap(walks, selectedWalk, darkMode, mapRef) {\n\n\t// Remove the visible group\n\tif (visibleGroup.peek()) visibleGroup.peek().remove();\n\n\tconst walk = walks.find(obj => {\n\t\treturn obj.shortname === selectedWalk;\n\t});\n\n\tconst route = L.geoJSON(walk.route, {\n\t\tstyle: {\n\t\t\tcolor: 'var(--orange-6)',\n\t\t\tweight: 5,\n\t\t\topacity: 0.65\n\t\t}\n\t});\n\n\tconst group = L.featureGroup([route]);\n\n\tif (walk.landmarkMarkers) {\n\t\tconst landmarkMarkers = createMarkers(walk.landmarkMarkers.features, darkMode);\n\t\tlandmarkMarkers.forEach(marker => marker.addTo(group));\n\t}\n\n\tif (walk.routeMarkers) {\n\t\tconst routeMarkers = createMarkers(walk.routeMarkers.features, darkMode);\n\t\trouteMarkers.forEach(marker => marker.addTo(group));\n\t}\n\n\t// Add the current group to state\n\tvisibleGroup.value = group;\n\n\tgroup.addTo(mapRef.current);\n\n\tmapRef.current.fitBounds(group.getBounds());\n\n}\n\nexport default updateMap;\n","import { useEffect, useRef } from 'preact/hooks';\nimport { effect } from '@preact/signals';\n\nimport * as L from 'leaflet';\n\nimport { walks, selectedWalk, darkMode } from '../../signals';\n\nimport updateMap from '../../effects/updateMap';\n\nimport 'leaflet/dist/leaflet.css';\nimport style from './style.module.css';\n\n/**\n * Map\n *\n * @return {React.ReactElement}\n */\nfunction Map() {\n\n\tconst mapRef = useRef({});\n\n\tuseEffect(() => {\n\n\t\tconst home = L.latLng(51.275710, 1.336495);\n\n\t\tmapRef.current = L.map('mapid', {\n\t\t\tdragging: !L.Browser.mobile,\n\t\t\tscrollWheelZoom: !L.Browser.mobile\n\t\t}).setView(home, 12);\n\n\t\tL.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\tmaxZoom: 18,\n\t\t\tminZoom: 3,\n\t\t\tbounds: [\n\t\t\t\t[ -180, 180 ],\n\t\t\t\t[ 180, -180 ]\n\t\t\t]\n\t\t}).addTo(mapRef.current);\n\n\t\t// Signals effect that updates the map by\n\t\t// adding subscriptions to various signal values\n\t\teffect(() => updateMap(\n\t\t\twalks.peek(),\n\t\t\tselectedWalk.value,\n\t\t\tdarkMode.value,\n\t\t\tmapRef\n\t\t));\n\n\t}, []);\n\n\treturn (\n\t\t<section ref={mapRef} class={style.mapContainer} id=\"mapid\" />\n\t);\n\n}\n\nexport default Map;\n","import { useEffect } from 'preact/hooks';\nimport { route } from 'preact-router';\n\nimport Details from '../Details';\nimport Map from '../Map';\n\nimport { selectedWalk, walks } from '../../signals';\n\nimport style from './style.module.css';\n\n/**\n * Main\n *\n * @param {Object} props\n * @return {React.ReactElement}\n */\nfunction Main(props) {\n\t\n\tconst { matches: { walk } } = props;\n\n\tuseEffect(() => {\n\t\tif (walk.length) {\n\t\t\tselectedWalk.value = walk;\n\t\t} else {\n\t\t\troute(`/${walks.value[0].shortname}`, true);\n\t\t}\n\t}, [walk]);\n\n\treturn (\n\t\t<main class={style.main}>\n\t\t\t<Details walk={walk} />\n\t\t\t<Map walk={walk} />\n\t\t</main>\n\t);\n\n}\n\nexport default Main;\n","import { darkMode } from '../signals';\n\n/**\n * useTheme\n *\n * Alters the root class name depending on the dark mode value\n *\n */\nfunction useTheme() {\n\tdocument.documentElement.className = darkMode.value ? 'dark' : 'light';\n}\n\nexport default useTheme;\n","import Router from 'preact-router';\n\nimport { Main } from '../components';\n\nimport useTheme from '../hooks/useTheme';\n\n/**\n * App\n *\n * @return {React.ReactElement}\n */\nfunction App() {\n\n\tuseTheme();\n\n\treturn (\n\t\t<Router>\n\t\t\t<Main path=\"/:walk?\" />\n\t\t</Router>\n\t);\n}\n\nexport default App;\n","import { render } from 'preact';\n\nimport Layout from './layout';\n\nrender(<Layout />, document.body);\n"],"names":["darkMode","signal","store","data","walks","computed","value","selectedWalk","shortname","totalDistance","unit","distance","totalWalks","length","totalJourneys","reduce","acc","walk","dates","visibleGroup","undefined","handleDarkLightMode","peek","DarkLightIcon","cn","classNames","style","icon","_jsx","type","class","onClick","DetailsPanel","children","panel","PanelItem","props","Link","item","activeClassName","active","href","PanelPara","para","Details","_jsxs","details","title","detailsHeader","map","id","name","createMarkers","marker","geometry","coordinates","properties","icons","lng","lat","L","html","className","updateMap","mapRef","remove","find","obj","route","color","weight","opacity","group","landmarkMarkers","features","forEach","addTo","routeMarkers","current","fitBounds","getBounds","Map","useRef","useEffect","home","dragging","mobile","scrollWheelZoom","setView","attribution","maxZoom","minZoom","bounds","effect","ref","mapContainer","Main","matches","main","useTheme","document","documentElement","App","Router","path","render","Layout","body"],"mappings":"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"}